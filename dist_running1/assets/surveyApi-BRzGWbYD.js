import{a as l}from"./axiosClient-CWaqpX3y.js";import{ah as o}from"./index-BI7POapL.js";class m{async getPublicSurveys(){try{return((await l.get("/surveys/public")).surveys||[]).map(r=>{if(r.image&&!r.image.startsWith("http")){const e=r.image.startsWith("/api")?r.image.replace("/api",""):r.image,a=`${o}${e}`;return console.log("ðŸ–¼ï¸ Survey List Image URL:",{surveyId:r.id,original:r.image,final:a}),{...r,image:a}}return r})}catch(n){return console.error("Error fetching public surveys:",n),[]}}async getSurveyById(n){try{const s=await l.get(`/surveys/public/${n}`);if(!s.survey)return null;const r=s.survey;if(r.image&&!r.image.startsWith("http")){const e=r.image.startsWith("/api")?r.image.replace("/api",""):r.image,a=`${o}${e}`;console.log("ðŸ–¼ï¸ Image URL Conversion:",{original:r.image,imagePath:e,API_IMAGE_BASE_URL:o,final:a}),r.image=a}return r.questions&&(r.questions=r.questions.map(e=>{if((e.type==="multiple_choice"||e.type==="multiple-choice")&&e.options){const a=e.options.map(c=>{if(typeof c=="object"){const t={...c};if(t.imageUrl&&!t.imageUrl.startsWith("http")){const i=t.imageUrl.startsWith("/api")?t.imageUrl.replace("/api",""):t.imageUrl;t.imageUrl=`${o}${i}`}return t.imageUrls&&Array.isArray(t.imageUrls)&&(t.imageUrls=t.imageUrls.map(i=>{if(i.startsWith("http"))return i;const p=i.startsWith("/api")?i.replace("/api",""):i;return`${o}${p}`})),t}return c});return{...e,options:a}}return e})),r}catch(s){return console.error("Error fetching survey:",s),null}}async submitResponse(n){try{return await l.post("/surveys/public/responses",n),!0}catch(s){return console.error("Error submitting survey response:",s),!1}}}const y=new m;export{y as s};
