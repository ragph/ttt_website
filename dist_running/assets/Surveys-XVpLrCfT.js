import{j as e,p as o,t as n,q as S,r as a,C,x as w,P as k,G as u}from"./index-DznvhCSQ.js";import{s as E}from"./surveyApi-B3zqa3NB.js";import{C as R,a as A}from"./CardContent-BMOBpvbG.js";import{C as P}from"./CardMedia-C6KQyWFG.js";import{C as c}from"./Chip-BiSOyzBX.js";import{S as z}from"./SectionHeader-CXIy31HI.js";import"./axiosClient-2pjz16cZ.js";const G=({survey:t,onClick:r})=>{const l=t.image||"/images/placeholder-survey.png";return e.jsxs(R,{sx:{background:"transparent",height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",boxShadow:0,transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)"}},onClick:r,children:[e.jsx(P,{component:"img",image:l,alt:t.title,sx:{aspectRatio:"1 / 1",objectFit:"contain"}}),e.jsxs(A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:0},children:[e.jsxs(o,{sx:{mb:1},children:[e.jsx(c,{label:t.category,size:"small",color:"primary",sx:{mb:1}}),t.status==="inactive"&&e.jsx(c,{label:"Inactive",size:"small",color:"warning",sx:{ml:1,mb:1}})]}),e.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:1},children:t.title}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description}),e.jsx(o,{sx:{mt:"auto",display:"flex",gap:2},children:t.totalResponses>0&&e.jsxs(n,{variant:"caption",color:"success.main",children:[t.totalResponses," responses"]})})]})]})},L=()=>{const t=S(),[r,l]=a.useState("All"),[d,m]=a.useState([]),[g,x]=a.useState(!0),[h,f]=a.useState(["All"]);a.useEffect(()=>{window.scrollTo(0,0)},[]),a.useEffect(()=>{(async()=>{x(!0);const i=await E.getPublicSurveys();m(i);const y=["All",...new Set(i.map(v=>v.category))];f(y),x(!1)})()},[]);const p=r==="All"?d:d.filter(s=>s.category===r),b=s=>s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),j=s=>{const i=b(s.title);t(`/surveys/${i}`,{state:{surveyId:s.id}})};return e.jsx(o,{sx:{bgcolor:"background.default",minHeight:"100vh",py:4},children:e.jsxs(C,{maxWidth:"lg",children:[e.jsx(z,{badge:"SHARE YOUR EXPERIENCE",title:"Surveys and Votings",subtitle:"Share your travel experiences and help us improve our services",align:"center",containerSx:{mb:4}}),g?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(w,{})}):e.jsxs(e.Fragment,{children:[e.jsx(k,{elevation:1,sx:{mb:4,p:2,overflowX:"auto",display:"flex",gap:1,"&::-webkit-scrollbar":{height:8},"&::-webkit-scrollbar-track":{bgcolor:"background.default",borderRadius:4},"&::-webkit-scrollbar-thumb":{bgcolor:"divider",borderRadius:4,"&:hover":{bgcolor:"text.secondary"}}},children:h.map(s=>e.jsx(c,{label:s,onClick:()=>l(s),color:r===s?"primary":"default",variant:r===s?"filled":"outlined",sx:{cursor:"pointer",fontWeight:r===s?600:400,whiteSpace:"nowrap"}},s))}),e.jsx(u,{container:!0,spacing:3,children:p.map(s=>e.jsx(u,{size:{xs:12,sm:6,md:4},children:e.jsx(G,{survey:s,onClick:()=>j(s)})},s.id))})]}),p.length===0&&e.jsx(o,{sx:{textAlign:"center",py:8},children:e.jsx(n,{variant:"h6",color:"text.secondary",children:"No surveys found in this category"})})]})})};export{L as default};
