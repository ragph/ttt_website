import{a as c}from"./axiosClient-ixJt8qTo.js";import{ak as o}from"./index-CtWFjw_2.js";class g{async getPublicSurveys(){try{return((await c.get("/surveys/public")).surveys||[]).map(r=>{if(r.image&&!r.image.startsWith("http")){const t=r.image.startsWith("/api")?r.image.replace("/api",""):r.image,i=`${o}${t}`;return console.log("ðŸ–¼ï¸ Survey List Image URL:",{surveyId:r.id,original:r.image,final:i}),{...r,image:i}}return r})}catch(a){return console.error("Error fetching public surveys:",a),[]}}async getSurveyById(a){try{const e=await c.get(`/surveys/public/${a}`);if(!e.survey)return null;const r=e.survey;if(r.image&&!r.image.startsWith("http")){const t=r.image.startsWith("/api")?r.image.replace("/api",""):r.image,i=`${o}${t}`;console.log("ðŸ–¼ï¸ Image URL Conversion:",{original:r.image,imagePath:t,API_IMAGE_BASE_URL:o,final:i}),r.image=i}return r.questions&&(r.questions=r.questions.map(t=>{if((t.type==="multiple_choice"||t.type==="multiple-choice")&&t.options){const i=t.options.map(l=>{if(typeof l=="object"){const s={...l};if(s.imageUrl&&!s.imageUrl.startsWith("http")){const n=s.imageUrl.startsWith("/api")?s.imageUrl.replace("/api",""):s.imageUrl;s.imageUrl=`${o}${n}`}return s.imageUrls&&Array.isArray(s.imageUrls)&&(s.imageUrls=s.imageUrls.map(n=>{if(n.startsWith("http"))return n;const p=n.startsWith("/api")?n.replace("/api",""):n;return`${o}${p}`})),s}return l});return{...t,options:i}}return t})),r}catch(e){return console.error("Error fetching survey:",e),null}}async submitResponse(a){try{return await c.post("/surveys/public/responses",a),!0}catch(e){return console.error("Error submitting survey response:",e),!1}}async getSurveyResults(a){try{return await c.get(`/casting/${a}/stats`)}catch(e){throw console.error("Error fetching survey results:",e),e}}}const y=new g;export{y as s};
