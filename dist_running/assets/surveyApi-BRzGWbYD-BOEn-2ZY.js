import{h as l}from"./axiosClient-CWaqpX3y-DsLiUPjC.js";import{ag as n}from"./index-Blp7pDh0.js";class p{async getPublicSurveys(){try{return((await l.get("/surveys/public")).surveys||[]).map(e=>{if(e.image&&!e.image.startsWith("http")){const i=e.image.startsWith("/api")?e.image.replace("/api",""):e.image,t=`${n}${i}`;return console.log("ðŸ–¼ï¸ Survey List Image URL:",{surveyId:e.id,original:e.image,final:t}),{...e,image:t}}return e})}catch(e){return console.error("Error fetching public surveys:",e),[]}}async getSurveyById(e){try{const i=await l.get(`/surveys/public/${e}`);if(!i.survey)return null;const t=i.survey;if(t.image&&!t.image.startsWith("http")){const s=t.image.startsWith("/api")?t.image.replace("/api",""):t.image,o=`${n}${s}`;console.log("ðŸ–¼ï¸ Image URL Conversion:",{original:t.image,imagePath:s,API_IMAGE_BASE_URL:n,final:o}),t.image=o}return t.questions&&(t.questions=t.questions.map(s=>{if((s.type==="multiple_choice"||s.type==="multiple-choice")&&s.options){const o=s.options.map(u=>{if(typeof u=="object"){const r={...u};if(r.imageUrl&&!r.imageUrl.startsWith("http")){const a=r.imageUrl.startsWith("/api")?r.imageUrl.replace("/api",""):r.imageUrl;r.imageUrl=`${n}${a}`}return r.imageUrls&&Array.isArray(r.imageUrls)&&(r.imageUrls=r.imageUrls.map(a=>{if(a.startsWith("http"))return a;const m=a.startsWith("/api")?a.replace("/api",""):a;return`${n}${m}`})),r}return u});return{...s,options:o}}return s})),t}catch(i){return console.error("Error fetching survey:",i),null}}async submitResponse(e){try{return await l.post("/surveys/public/responses",e),!0}catch(i){return console.error("Error submitting survey response:",i),!1}}}const h=new p;export{h as y};
