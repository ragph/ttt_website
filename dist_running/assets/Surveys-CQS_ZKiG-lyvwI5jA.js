import{c as v,S as o,_ as e,w as a,r as w,f as S,s as k,L as m,y as i}from"./index-Blp7pDh0.js";import{y as R}from"./surveyApi-BRzGWbYD-BOEn-2ZY.js";import{j as C,N as A}from"./CardContent-Cf2urb3M-D7qdtt7G.js";import{w as E}from"./CardMedia-C_oDLxF8-glz2fq1Q.js";import{v as c}from"./Chip-BseTIWvc-CThzy0i9.js";import{p as z}from"./SectionHeader-CdkdEMxr-DPki8eAZ.js";import"./axiosClient-CWaqpX3y-DsLiUPjC.js";const L=({survey:s,onClick:t})=>{const l=s.image||"/images/placeholder-survey.png";return e.jsxs(C,{sx:{background:"transparent",height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",boxShadow:0,transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)"}},onClick:t,children:[e.jsx(E,{component:"img",image:l,alt:s.title,sx:{aspectRatio:"1 / 1",objectFit:"contain"}}),e.jsxs(A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:0},children:[e.jsxs(a,{sx:{mb:1},children:[e.jsx(c,{label:s.category,size:"small",color:"primary",sx:{mb:1}}),s.status==="inactive"&&e.jsx(c,{label:"Inactive",size:"small",color:"warning",sx:{ml:1,mb:1}})]}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,mb:1},children:s.title}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.description}),e.jsx(a,{sx:{mt:"auto",display:"flex",gap:2},children:s.totalResponses>0&&e.jsxs(i,{variant:"caption",color:"success.main",children:[s.totalResponses," responses"]})})]})]})},H=()=>{const s=v(),[t,l]=o.useState("All"),[x,u]=o.useState([]),[h,d]=o.useState(!0),[b,g]=o.useState(["All"]);o.useEffect(()=>{(async()=>{d(!0);const r=await R.getPublicSurveys();u(r);const n=["All",...new Set(r.map(j=>j.category))];g(n),d(!1)})()},[]);const p=t==="All"?x:x.filter(r=>r.category===t),y=r=>r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),f=r=>{const n=y(r.title);s(`/surveys/${n}`,{state:{surveyId:r.id}})};return e.jsx(a,{sx:{bgcolor:"background.default",minHeight:"100vh",py:4},children:e.jsxs(w,{maxWidth:"lg",children:[e.jsx(z,{badge:"SHARE YOUR EXPERIENCE",title:"Surveys and Votings",subtitle:"Share your travel experiences and help us improve our services",align:"center",containerSx:{mb:4}}),h?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(S,{})}):e.jsxs(e.Fragment,{children:[e.jsx(k,{elevation:1,sx:{mb:4,p:2,overflowX:"auto",display:"flex",gap:1,"&::-webkit-scrollbar":{height:8},"&::-webkit-scrollbar-track":{bgcolor:"background.default",borderRadius:4},"&::-webkit-scrollbar-thumb":{bgcolor:"divider",borderRadius:4,"&:hover":{bgcolor:"text.secondary"}}},children:b.map(r=>e.jsx(c,{label:r,onClick:()=>l(r),color:t===r?"primary":"default",variant:t===r?"filled":"outlined",sx:{cursor:"pointer",fontWeight:t===r?600:400,whiteSpace:"nowrap"}},r))}),e.jsx(m,{container:!0,spacing:3,children:p.map(r=>e.jsx(m,{size:{xs:12,sm:6,md:4},children:e.jsx(L,{survey:r,onClick:()=>f(r)})},r.id))})]}),p.length===0&&e.jsx(a,{sx:{textAlign:"center",py:8},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:"No surveys found in this category"})})]})})};export{H as default};
